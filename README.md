# Soundscapes Analysis Template

This repository provides a template for analyzing soundscapes using python. The project was created with the intention of offering an easy-to-use and reproducible framework that can be used by researchers, conservation biologists, citizen scientists, and anyone else interested in ecoacoustics and soundscape ecology.

## Table of Contents

- [Background](#background)
- [Installation Instructions](#installation-instructions)
- [Getting Started](#getting-started)
- [Directory Structure](#directory-structure)
- [Contribution Guidelines](#contribution-guidelines)
- [License](#license)

## Background

Soundscapes are composed of all sounds occurring in a given habitat, including biological sounds such as animal vocalizations and non-biological sounds like wind and water. Analyzing soundscapes can provide valuable information about species richness, habitat quality, and ecological changes over time. 

The Python programming language has become key for analyzing soundscapes since it is an open-source language and provides numerous scientific libraries for manipulating sound data. This project provides a template for organizing sound data analysis code and provides an example of how to analyze sound recordings in the .wav format.

## Installation Instructions

To get started with this project, you will need to clone this repository:

```bash
git clone https://github.com/juansulloa/soundscape_analysis_template.git
```

Then, install the required packages by running:

```bash
pip install -r requirements.txt
```

## Getting Started

### 1. Organize directories
Organize files accorind to [this structure](#directory-structure).
    - Sound files must be organized into subdirectories based on the recording device.
    - Rename the directory where you have this repository as 'workflows'.
    - Create the output directories and its subdirectories 'figures' and 'metadata' and others.

### 2. Set configuration
Edit the `config.yaml` file in the root directory to point to your sound files and adjust the settings according to your analysis needs.

### 3. Run scripts
Run the scripts from each directory to prepare the data and extract features. 

#### 3.1. Preprocessing
In the `preprocessing` module, execute the `prep_notebook.py` script **line by line**. Carefully verify the sites that did not work, remove noise, and unwanted files. The script includes detailed explanations for each step in the analysis process. By the end, you should have a curated file list with associated metadata saved in a `*.csv` file.

#### 3.2. Compute acoustic indices
Navigate to the `acoustic_indices` directory and compute acoustic indices using the Command Line Interface. 
```bash
cd acoustic_indices
python compute_indices.py -i ../../output/metadata.csv -o ../../output/dataframes_ai/ -c ../config.yml
```

#### 3.3. Compute graphical soundscapes
Navigate to the `graphical_soundscape` directory. Verify that the settings are appropriate for your proyect. Once adjusted, compute the graphical soundscape for all files.
```bash
cd graphical_soundscape
python compute_graph.py spectrogram_local_max -i test_audio.wav -d  # test configuration
python compute_graph.py graphical_soundscape -i ../../output/metadata.csv -o ../../output/dataframes_gs/ -c ../config.yml
```

### 4. Visualize and perform statistical analiyses
Since the statistical analyses are project-dependent, specific visualization tools should be chosen to aid in the process.

## Directory Structure

The directory structure of this project is as follows:

```
├── data
│   ├── SITE001
│   │   ├── recording1.wav
│   │   └── recording2.wav
│   ├── SITE002
│   │   └── recording3.wav
│   └── SITE003
│       └── recording4.wav
├── workflows
│   ├── config.yaml
│   ├── preprocessing
│   ├── acoustic_indices
│   └── graphical_soundscapes
├── input
│   ├── sensor_deployment.csv
│   └── mannot
├── output
│   ├── figures
│   ├── metadata
│   ├── dataframes_gs
│   └── dataframes_ai
├── README.md
└── requirements.txt
```

- `config.yaml`: configuration file for specifying input/output directories, settings, and parameters.
- `data/`: directory containing sound files organized into subdirectories based on location or device. I usually have this data in a harddrive and I make a symbolik link using `ln -s <source_dir> <target_dir>`.
- `workflows/`: directory containing scripts for loading data, feature extraction, data visualization, and statistical analysis.
- `input/`: directory containing input files comming from field data and manual annotations.
- `output/`: directory containing output files generated by the workflows.
- `README.md`: Adjust this file providing an overview of the project.
- `requirements.txt`: file listing all Python packages required to run the notebooks.

## Contribution Guidelines

This project was developed with the intention of being openly available for anyone to use and improve it. If you wish to contribute to this project, please follow these steps:

1. Fork this repository to your own GitHub account.
2. Clone the forked repository to your local machine.
3. Create a new branch with a descriptive name for your contribution.
4. Make changes to the code or documentation.
5. Push your changes to your forked repository.
6. Create a pull request to the original repository.

## License

This project is licensed under the MIT License - see the [LICENSE.md](LICENSE.md) file for details.
